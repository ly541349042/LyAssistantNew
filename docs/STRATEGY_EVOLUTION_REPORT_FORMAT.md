# Strategy Evolution Report Format

This document defines the JSON format generated by `src/strategy_evolution.py`.

```json
{
  "strategy_evolution_report": {
    "what_worked_recently": ["trend_momentum", "risk_volatility"],
    "what_failed": ["news_sentiment", "earnings_context"],
    "old_weights": {
      "trend_momentum": 25,
      "fundamentals": 25,
      "news_sentiment": 20,
      "earnings_context": 15,
      "risk_volatility": 15
    },
    "new_weights": {
      "trend_momentum": 26,
      "fundamentals": 24,
      "news_sentiment": 19,
      "earnings_context": 15,
      "risk_volatility": 16
    },
    "applied_changes": [
      {
        "strategy_id": "news_sentiment",
        "weight_key": "news_sentiment",
        "old_weight": 20,
        "new_weight": 18,
        "reason": "degraded performance detected"
      }
    ],
    "performance_details": {
      "news_sentiment": {
        "strategy_id": "news_sentiment",
        "metrics": {
          "1d": {
            "trade_count": 20,
            "win_rate": 0.35,
            "avg_return_pct": -0.12,
            "benchmark_return_pct": 0.15
          },
          "5d": {
            "trade_count": 20,
            "win_rate": 0.40,
            "avg_return_pct": 0.31,
            "benchmark_return_pct": 0.60
          },
          "20d": {
            "trade_count": 20,
            "win_rate": 0.45,
            "avg_return_pct": 1.72,
            "benchmark_return_pct": 2.50
          }
        },
        "degraded": true,
        "degraded_reasons": [
          "1d win_rate 35.00% below threshold 40.00%"
        ]
      }
    }
  }
}
```

Notes:
- `metrics` always include `1d`, `5d`, and `20d` horizons.
- `degraded` follows spec criteria:
  - win rate < 40% over the configured window, or
  - average return < configured benchmark.
- `applied_changes` captures every weight update for full auditability.
